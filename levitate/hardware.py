import os
import numpy as np


def data_to_cpp(complex_values, filename, normalize=True):
    directory = os.path.dirname(filename)
    if not os.path.exists(directory):
        os.makedirs(directory)
    data = np.asarray(complex_values)
    normalization = np.max(np.abs(data))
    (data / normalization).conj().astype(np.complex64).tofile(filename)


def data_from_cpp(file, num_transducers):
    return np.fromfile(file, dtype=np.complex64).conj().reshape((-1, num_transducers))


def dragonfly_grid():
    positions = []
    normals = []
    positions.append((-0.026175, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.047115, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.057585, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.068055, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.078525, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((-0.005235, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.015705, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.026175, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((-0.036645, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, 0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, 0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, 0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, 0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, 0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, 0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, 0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, 0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.057585, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.047115, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.078525, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.068055, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, -0.047115, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, -0.057585, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, -0.068055, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, -0.078525, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, -0.005235, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, -0.015705, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, -0.026175, 0))
    normals.append((0, 0, 1))
    positions.append((0.015705, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.005235, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.036645, -0.036645, 0))
    normals.append((0, 0, 1))
    positions.append((0.026175, -0.036645, 0))
    normals.append((0, 0, 1))

    return np.array(positions), np.array(normals)
